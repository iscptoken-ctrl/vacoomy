<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Vacoomy</title>
<style>
  body { display: flex; justify-content: center; align-items: center; height: 100vh; background: #eee; position: relative; }
  #gameCanvas { background: #fff; border: 2px solid #000; touch-action: none; }
  #score, #timer { position: absolute; font-size: 20px; font-weight: bold; }
  #score { top: 10px; left: 10px; }
  #timer { top: 10px; right: 10px; }
</style>
</head>
<body>
<div id="score">Puan: 0</div>
<div id="timer">02:00</div>
<canvas id="gameCanvas" width="600" height="600" tabindex="0"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.focus();

const scoreDisplay = document.getElementById('score');
const timerDisplay = document.getElementById('timer');

let vacuum = { x: 300, y: 300, size: 40 };
let numbers = [];
let score = 0;
let totalTime = 120;
let elapsedTime = 0;

function spawnNumber() {
  const value = Math.floor(Math.random() * 9) + 1;
  numbers.push({
    x: Math.random() * (canvas.width - 20),
    y: Math.random() * (canvas.height - 20),
    value: value,
    ttl: value * 60
  });
}
setInterval(spawnNumber, 1000);

function drawVacuum() {
  // Çekim alanı
  ctx.fillStyle = 'rgba(0,0,255,0.2)';
  ctx.beginPath();
  ctx.arc(vacuum.x, vacuum.y, 50, 0, Math.PI*2);
  ctx.fill();

  // Süpürge (kare)
  ctx.fillStyle = 'blue';
  ctx.fillRect(vacuum.x - vacuum.size/2, vacuum.y - vacuum.size/2, vacuum.size, vacuum.size);
}

function drawNumbers() {
  numbers.forEach(num => {
    ctx.fillStyle = 'red';
    ctx.font = '20px Arial';
    ctx.fillText(num.value, num.x, num.y);
    num.ttl--;
  });
  numbers = numbers.filter(num => num.ttl > 0);
}

let keys = {};
canvas.addEventListener('keydown', e => keys[e.key] = true);
canvas.addEventListener('keyup', e => keys[e.key] = false);

function update() {
  if(keys['ArrowUp']) vacuum.y -= 5;
  if(keys['ArrowDown']) vacuum.y += 5;
  if(keys['ArrowLeft']) vacuum.x -= 5;
  if(keys['ArrowRight']) vacuum.x += 5;

  vacuum.x = Math.max(0, Math.min(canvas.width, vacuum.x));
  vacuum.y = Math.max(0, Math.min(canvas.height, vacuum.y));

  numbers.forEach((num, i) => {
    const dx = vacuum.x - num.x;
    const dy = vacuum.y - num.y;
    const dist = Math.hypot(dx, dy);

    if(dist < 50) {
      num.x += dx * 0.05;
      num.y += dy * 0.05;
    }

    if(dist < 25) {
      score += num.value;
      numbers.splice(i,1);
    }
  });

  scoreDisplay.textContent = `Puan: ${score}`;

  elapsedTime++;
  const remaining = Math.max(0, totalTime - Math.floor(elapsedTime / 60));
  const minutes = String(Math.floor(remaining / 60)).padStart(2,'0');
  const seconds = String(remaining % 60).padStart(2,'0');
  timerDisplay.textContent = `${minutes}:${seconds}`;
}

function loop() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  update();
  drawVacuum();
  drawNumbers();
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
