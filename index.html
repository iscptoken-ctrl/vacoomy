<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Vacoomy</title>
<style>
  body { display: flex; justify-content: center; align-items: center; height: 100vh; background: #eee; }
  #gameCanvas { background: #fff; border: 2px solid #000; touch-action: none; }
  #score { position: absolute; top: 10px; left: 10px; font-size: 20px; font-weight: bold; }
</style>
</head>
<body>
<div id="score">Puan: 0</div>
<canvas id="gameCanvas" width="600" height="600"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const scoreDisplay = document.getElementById('score');

let vacuum = { x: 300, y: 300, size: 25, angle: 0 };
let numbers = [];
let score = 0;

function spawnNumber() {
  const value = Math.floor(Math.random() * 9) + 1;
  numbers.push({
    x: Math.random() * (canvas.width - 20),
    y: Math.random() * (canvas.height - 20),
    value: value,
    ttl: value * 60 // 1 saniye = 60 frame olarak varsayalım
  });
}
setInterval(spawnNumber, 1000);

function drawVacuum() {
  ctx.save();
  ctx.translate(vacuum.x, vacuum.y);
  ctx.rotate(vacuum.angle);
  ctx.fillStyle = 'blue';
  ctx.beginPath();
  ctx.moveTo(0, -vacuum.size/2);
  ctx.lineTo(vacuum.size/2, vacuum.size/2);
  ctx.lineTo(-vacuum.size/2, vacuum.size/2);
  ctx.closePath();
  ctx.fill();
  ctx.restore();
}

function drawNumbers() {
  numbers.forEach(num => {
    ctx.fillStyle = 'red';
    ctx.font = '20px Arial';
    ctx.fillText(num.value, num.x, num.y);
    num.ttl--;
  });
  numbers = numbers.filter(num => num.ttl > 0);
}

let keys = {};
window.addEventListener('keydown', e => keys[e.key] = true);
window.addEventListener('keyup', e => keys[e.key] = false);

function update() {
  if(keys['ArrowUp']) { vacuum.y -= 3; vacuum.angle = -Math.PI/2; }
  if(keys['ArrowDown']) { vacuum.y += 3; vacuum.angle = Math.PI/2; }
  if(keys['ArrowLeft']) { vacuum.x -= 3; vacuum.angle = Math.PI; }
  if(keys['ArrowRight']) { vacuum.x += 3; vacuum.angle = 0; }

  // sınırlar
  vacuum.x = Math.max(0, Math.min(canvas.width, vacuum.x));
  vacuum.y = Math.max(0, Math.min(canvas.height, vacuum.y));

  // çarpışma kontrolü
  numbers.forEach((num, i) => {
    if(Math.hypot(vacuum.x - num.x, vacuum.y - num.y) < 25) {
      score += num.value;
      numbers.splice(i,1);
    }
  });

  scoreDisplay.textContent = `Puan: ${score}`;
}

function loop() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  update();
  drawVacuum();
  drawNumbers();
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
